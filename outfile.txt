'''
Harsha Ashokan Copparam

File: agent_world_interface.py

Returns the percept sequence after each agent action
{'world':world_var, 'pit': pit_return, 'gold': gold_return, 'wumpus': wumpus_return}
{'number_pits':num_pits, 'pit_location':pits, 'breeze_location':breeze_pl}
{'gold_location':gold}
{'wumpus_location':wumpus_loc, 'stench_location':stench_loc}
'''

import world_gen
envi = world_gen.world_func(100,3)
has_arrow = True

def return_percept_seq (agent_action, agent_position, parameter):
	global world
	global has_arrow
	wrong_action = -1
	dim = envi['dimension']
	if(agent_action == 'move_forward'):
		agent_new_position = [agent_position[0], agent_position[1]+1]	
	if(agent_action == 'move_backward'):
		agent_new_position = [agent_position[0], agent_position[1]-1]	
	if(agent_action == 'move_left'):
		agent_new_position = [agent_position[0]-1, agent_position[1]]	
	if(agent_action == 'move_right'):
		agent_new_position = [agent_position[0]+1, agent_position[1]+1]
	if(agent_action == 'shoot_wumpus'):
		if(has_arrow == False):
			print "You do not have an arrow to shoot the wumpus with. "	
		elif(parameter == envi['wumpus']['wumpus_location']):
			print "Killed the wumpus"
		else: 
			print "You wasted your chance, there was no wumpus at that location."
			wrong_action = 2 #"No wumpus at that location" 
		agent_new_position = agent_position
		has_arrow = False
	if(agent_action == 'grab_gold'):
		if(parameter == envi['gold']['gold_location']):
			print "You got the gold"
		else:
			print "There was no gold there. "
			wrong_action = 3 #"No gold at that location"
	if((agent_new_position[0] >= dim) or (agent_new_position[1] >= dim) or (agent_new_position[0] <= -1) or (agent_new_position[1] <= -1)):
		print "Reached End of Map, take a different route."
		wrong_action = 4 #"End of Map"
		agent_new_position = agent_position
	for i in range (dim*dim):
		if(envi['world'][i][0] == agent_new_position):
			percept_seq = envi['world'][i][1:]
return {'percept_sequence':percept_seq, 'error_msg':wrong_action, 'new_position':agent_new_position}
